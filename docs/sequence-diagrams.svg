<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2684px" preserveAspectRatio="none" style="width:1954px;height:2684px;background:#FFFFFF;" version="1.1" viewBox="0 0 1954 2684" width="1954px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="148.4688" style="stroke:#000000;stroke-width:1.5;" width="523" x="1032" y="228.8281"/><rect fill="none" height="456.6016" style="stroke:#000000;stroke-width:1.5;" width="1879" x="58" y="1583.4766"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="1643.5" x="283.5" y="1782.4063"/><rect fill="none" height="96.5313" style="stroke:#000000;stroke-width:1.5;" width="729.5" x="283.5" y="2184.6094"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="31" x2="31" y1="81.2969" y2="2603.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="108" x2="108" y1="81.2969" y2="2603.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="336.5" x2="336.5" y1="81.2969" y2="2603.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="692.5" x2="692.5" y1="81.2969" y2="2603.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="932" x2="932" y1="81.2969" y2="2603.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1084" x2="1084" y1="81.2969" y2="2603.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1222" x2="1222" y1="81.2969" y2="2603.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1376" x2="1376" y1="81.2969" y2="2603.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1495" x2="1495" y1="81.2969" y2="2603.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1617" x2="1617" y1="81.2969" y2="2603.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1726" x2="1726" y1="81.2969" y2="2603.4688"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1844" x2="1844" y1="81.2969" y2="2603.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="5" y="77.9951">Citizen</text><ellipse cx="31.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M31.5,21.5 L31.5,48.5 M18.5,29.5 L44.5,29.5 M31.5,48.5 L18.5,63.5 M31.5,48.5 L44.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="5" y="2615.4639">Citizen</text><ellipse cx="31.5" cy="2627.2656" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M31.5,2635.2656 L31.5,2662.2656 M18.5,2643.2656 L44.5,2643.2656 M31.5,2662.2656 L18.5,2677.2656 M31.5,2662.2656 L44.5,2677.2656 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="68" y="77.9951">Gov Official</text><ellipse cx="108.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M108.5,21.5 L108.5,48.5 M95.5,29.5 L121.5,29.5 M108.5,48.5 L95.5,63.5 M108.5,48.5 L121.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="68" y="2615.4639">Gov Official</text><ellipse cx="108.5" cy="2627.2656" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M108.5,2635.2656 L108.5,2662.2656 M95.5,2643.2656 L121.5,2643.2656 M108.5,2662.2656 L95.5,2677.2656 M108.5,2662.2656 L121.5,2677.2656 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="293.5" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="305" y="53.6982">Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="300.5" y="69.9951">(React TS)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="86" x="293.5" y="2602.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="305" y="2622.4639">Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="300.5" y="2638.7607">(React TS)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="642.5" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="649.5" y="53.6982">Backend API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="661.5" y="69.9951">(Node.js)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="642.5" y="2602.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="649.5" y="2622.4639">Backend API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="661.5" y="2638.7607">(Node.js)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="862" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="869" y="53.6982">WebSocket Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="894.5" y="69.9951">(Socket.IO)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="862" y="2602.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="869" y="2622.4639">WebSocket Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="894.5" y="2638.7607">(Socket.IO)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="1042" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1049" y="69.9951">Clerk Auth</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="85" x="1042" y="2602.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1049" y="2622.4639">Clerk Auth</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="1137" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="1144" y="69.9951">NIC Verification Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="1137" y="2602.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="1144" y="2622.4639">NIC Verification Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="1317" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1324" y="69.9951">Facebook Auth</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="1317" y="2602.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1324" y="2622.4639">Facebook Auth</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1445" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1452" y="69.9951">Google Auth</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="1445" y="2602.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="1452" y="2622.4639">Google Auth</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1555" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1562" y="53.6982">AI Agent Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="1588.5" y="69.9951">(Python)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="1555" y="2602.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1562" y="2622.4639">AI Agent Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="1588.5" y="2638.7607">(Python)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1690" y="77.9951">Database</text><path d="M1708,29 C1708,19 1726,19 1726,19 C1726,19 1744,19 1744,29 L1744,55 C1744,65 1726,65 1726,65 C1726,65 1708,65 1708,55 L1708,29 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1708,29 C1708,39 1726,39 1726,39 C1726,39 1744,39 1744,29 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1690" y="2615.4639">Database</text><path d="M1708,2628.7656 C1708,2618.7656 1726,2618.7656 1726,2618.7656 C1726,2618.7656 1744,2618.7656 1744,2628.7656 L1744,2654.7656 C1744,2664.7656 1726,2664.7656 1726,2664.7656 C1726,2664.7656 1708,2664.7656 1708,2654.7656 L1708,2628.7656 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1708,2628.7656 C1708,2638.7656 1726,2638.7656 1726,2638.7656 C1726,2638.7656 1744,2638.7656 1744,2628.7656 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="141" x="1776" y="29.7031"/><rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="141" x="1772" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="1779" y="53.6982">Notification Queue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="1799" y="69.9951">(per user_id)</text><rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="141" x="1776" y="2602.4688"/><rect fill="#E2E2F0" height="46.5938" style="stroke:#181818;stroke-width:0.5;" width="141" x="1772" y="2606.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="1779" y="2626.4639">Notification Queue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="1799" y="2642.7607">(per user_id)</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1947" x="0" y="111.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="111.8633" y2="111.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="114.8633" y2="114.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="164" x="891.5" y="101.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="145" x="897.5" y="117.3638">Citizen Registration</text><polygon fill="#181818" points="324.5,151.5625,334.5,155.5625,324.5,159.5625,328.5,155.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31.5" x2="330.5" y1="155.5625" y2="155.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="38.5" y="150.4966">Open Landing Page</text><polygon fill="#181818" points="324.5,180.6953,334.5,184.6953,324.5,188.6953,328.5,184.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31.5" x2="330.5" y1="184.6953" y2="184.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="38.5" y="179.6294">Choose Sign Up</text><polygon fill="#181818" points="1072.5,209.8281,1082.5,213.8281,1072.5,217.8281,1076.5,213.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="1078.5" y1="213.8281" y2="213.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245" x="343.5" y="208.7622">Create user (email/password or social)</text><path d="M1032,228.8281 L1096,228.8281 L1096,235.9609 L1086,245.9609 L1032,245.9609 L1032,228.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="148.4688" style="stroke:#000000;stroke-width:1.5;" width="523" x="1032" y="228.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1047" y="241.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="163" x="1111" y="241.0386">[Social Login - Facebook]</text><polygon fill="#181818" points="1364,263.0938,1374,267.0938,1364,271.0938,1368,267.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1084.5" x2="1370" y1="267.0938" y2="267.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1091.5" y="262.0278">OAuth request</text><polygon fill="#181818" points="1095.5,292.2266,1085.5,296.2266,1095.5,300.2266,1091.5,296.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1089.5" x2="1375" y1="296.2266" y2="296.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="1101.5" y="291.1606">Auth success</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1032" x2="1555" y1="305.2266" y2="305.2266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="146" x="1037" y="315.437">[Social Login - Google]</text><polygon fill="#181818" points="1483,336.1641,1493,340.1641,1483,344.1641,1487,340.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1084.5" x2="1489" y1="340.1641" y2="340.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1091.5" y="335.0981">OAuth request</text><polygon fill="#181818" points="1095.5,365.2969,1085.5,369.2969,1095.5,373.2969,1091.5,369.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1089.5" x2="1494" y1="369.2969" y2="369.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="1101.5" y="364.231">Auth success</text><polygon fill="#181818" points="347.5,401.4297,337.5,405.4297,347.5,409.4297,343.5,405.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="1083.5" y1="405.4297" y2="405.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="353.5" y="400.3638">User created</text><polygon fill="#181818" points="680.5,430.5625,690.5,434.5625,680.5,438.5625,684.5,434.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="686.5" y1="434.5625" y2="434.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="343.5" y="429.4966">POST /verify-nic</text><polygon fill="#181818" points="1210,459.6953,1220,463.6953,1210,467.6953,1214,463.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="692.5" x2="1216" y1="463.6953" y2="463.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="699.5" y="458.6294">Verify NIC</text><polygon fill="#181818" points="703.5,488.8281,693.5,492.8281,703.5,496.8281,699.5,492.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="697.5" x2="1221" y1="492.8281" y2="492.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="709.5" y="487.7622">OK</text><polygon fill="#181818" points="1714,517.9609,1724,521.9609,1714,525.9609,1718,521.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="692.5" x2="1720" y1="521.9609" y2="521.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="699.5" y="516.895">Save NIC verification status</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1947" x="0" y="550.5273"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="550.5273" y2="550.5273"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="553.5273" y2="553.5273"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="114" x="916.5" y="539.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="95" x="922.5" y="556.0278">Citizen Login</text><polygon fill="#181818" points="324.5,590.2266,334.5,594.2266,324.5,598.2266,328.5,594.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31.5" x2="330.5" y1="594.2266" y2="594.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="38.5" y="589.1606">Login</text><polygon fill="#181818" points="1072.5,619.3594,1082.5,623.3594,1072.5,627.3594,1076.5,623.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="1078.5" y1="623.3594" y2="623.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="343.5" y="618.2935">Authenticate user</text><polygon fill="#181818" points="347.5,648.4922,337.5,652.4922,347.5,656.4922,343.5,652.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="1083.5" y1="652.4922" y2="652.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="353.5" y="647.4263">Session token</text><polygon fill="#181818" points="347.5,677.625,337.5,681.625,347.5,685.625,343.5,681.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="691.5" y1="681.625" y2="681.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="353.5" y="676.5591">Login success</text><polygon fill="#181818" points="920.5,706.7578,930.5,710.7578,920.5,714.7578,924.5,710.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="926.5" y1="710.7578" y2="710.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="343.5" y="705.6919">Connect with Clerk token</text><polygon fill="#181818" points="1072.5,735.8906,1082.5,739.8906,1072.5,743.8906,1076.5,739.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="932.5" x2="1078.5" y1="739.8906" y2="739.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="939.5" y="734.8247">Validate Clerk token</text><polygon fill="#181818" points="943.5,765.0234,933.5,769.0234,943.5,773.0234,939.5,769.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="937.5" x2="1083.5" y1="769.0234" y2="769.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="949.5" y="763.9575">Valid</text><polygon fill="#181818" points="1714,794.1563,1724,798.1563,1714,802.1563,1718,798.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="932.5" x2="1720" y1="798.1563" y2="798.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="939.5" y="793.0903">Map Clerk user_id -&gt; Database user_id</text><polygon fill="#181818" points="943.5,823.2891,933.5,827.2891,943.5,831.2891,939.5,827.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="937.5" x2="1725" y1="827.2891" y2="827.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="949.5" y="822.2231">User identified</text><polygon fill="#181818" points="1832.5,852.4219,1842.5,856.4219,1832.5,860.4219,1836.5,856.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="932.5" x2="1838.5" y1="856.4219" y2="856.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="939.5" y="851.356">Check undelivered notifications</text><polygon fill="#181818" points="943.5,881.5547,933.5,885.5547,943.5,889.5547,939.5,885.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="937.5" x2="1843.5" y1="885.5547" y2="885.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="949.5" y="880.4888">Any pending?</text><polygon fill="#181818" points="347.5,910.6875,337.5,914.6875,347.5,918.6875,343.5,914.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="931.5" y1="914.6875" y2="914.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="353.5" y="909.6216">Deliver undelivered notifications</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1947" x="0" y="943.2539"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="943.2539" y2="943.2539"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="946.2539" y2="946.2539"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="135" x="906" y="932.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="116" x="912" y="948.7544">Issue Reporting</text><polygon fill="#181818" points="324.5,982.9531,334.5,986.9531,324.5,990.9531,328.5,986.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31.5" x2="330.5" y1="986.9531" y2="986.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="38.5" y="981.8872">Create new issue</text><polygon fill="#181818" points="680.5,1012.0859,690.5,1016.0859,680.5,1020.0859,684.5,1016.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="686.5" y1="1016.0859" y2="1016.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="343.5" y="1011.02">POST /issues</text><polygon fill="#181818" points="1714,1041.2188,1724,1045.2188,1714,1049.2188,1718,1045.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="692.5" x2="1720" y1="1045.2188" y2="1045.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="699.5" y="1040.1528">Save issue</text><polygon fill="#181818" points="347.5,1070.3516,337.5,1074.3516,347.5,1078.3516,343.5,1074.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="691.5" y1="1074.3516" y2="1074.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="353.5" y="1069.2856">Confirmation</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1947" x="0" y="1102.918"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="1102.918" y2="1102.918"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="1105.918" y2="1105.918"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="149" x="899" y="1092.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="905" y="1108.4185">Gov Official Login</text><polygon fill="#181818" points="324.5,1142.6172,334.5,1146.6172,324.5,1150.6172,328.5,1146.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="108.5" x2="330.5" y1="1146.6172" y2="1146.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="115.5" y="1141.5513">Login</text><polygon fill="#181818" points="680.5,1171.75,690.5,1175.75,680.5,1179.75,684.5,1175.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="686.5" y1="1175.75" y2="1175.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="343.5" y="1170.6841">Authenticate user</text><polygon fill="#181818" points="347.5,1200.8828,337.5,1204.8828,347.5,1208.8828,343.5,1204.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="691.5" y1="1204.8828" y2="1204.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="353.5" y="1199.8169">Session token</text><polygon fill="#181818" points="347.5,1230.0156,337.5,1234.0156,347.5,1238.0156,343.5,1234.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="691.5" y1="1234.0156" y2="1234.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="353.5" y="1228.9497">Login success</text><polygon fill="#181818" points="1714,1259.1484,1724,1263.1484,1714,1267.1484,1718,1263.1484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="932.5" x2="1720" y1="1263.1484" y2="1263.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249" x="939.5" y="1258.0825">Map Clerk user_id -&gt; Database user_id</text><polygon fill="#181818" points="943.5,1288.2813,933.5,1292.2813,943.5,1296.2813,939.5,1292.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="937.5" x2="1725" y1="1292.2813" y2="1292.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="949.5" y="1287.2153">User identified</text><polygon fill="#181818" points="1832.5,1317.4141,1842.5,1321.4141,1832.5,1325.4141,1836.5,1321.4141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="932.5" x2="1838.5" y1="1321.4141" y2="1321.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="939.5" y="1316.3481">Check undelivered notifications</text><polygon fill="#181818" points="943.5,1346.5469,933.5,1350.5469,943.5,1354.5469,939.5,1350.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="937.5" x2="1843.5" y1="1350.5469" y2="1350.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="949.5" y="1345.481">Any pending?</text><polygon fill="#181818" points="347.5,1375.6797,337.5,1379.6797,347.5,1383.6797,343.5,1379.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="931.5" y1="1379.6797" y2="1379.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="353.5" y="1374.6138">Deliver undelivered notifications</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1947" x="0" y="1408.2461"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="1408.2461" y2="1408.2461"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="1411.2461" y2="1411.2461"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="249" x="849" y="1397.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="230" x="855" y="1413.7466">Gov Official Issue Management</text><polygon fill="#181818" points="324.5,1447.9453,334.5,1451.9453,324.5,1455.9453,328.5,1451.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="108.5" x2="330.5" y1="1451.9453" y2="1451.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="115.5" y="1446.8794">View assigned issues</text><polygon fill="#181818" points="680.5,1477.0781,690.5,1481.0781,680.5,1485.0781,684.5,1481.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="686.5" y1="1481.0781" y2="1481.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="343.5" y="1476.0122">GET /issues/assigned</text><polygon fill="#181818" points="1714,1506.2109,1724,1510.2109,1714,1514.2109,1718,1510.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="692.5" x2="1720" y1="1510.2109" y2="1510.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="699.5" y="1505.145">Fetch assigned issues</text><polygon fill="#181818" points="703.5,1535.3438,693.5,1539.3438,703.5,1543.3438,699.5,1539.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="697.5" x2="1725" y1="1539.3438" y2="1539.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="709.5" y="1534.2778">List of issues</text><polygon fill="#181818" points="347.5,1564.4766,337.5,1568.4766,347.5,1572.4766,343.5,1568.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="691.5" y1="1568.4766" y2="1568.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="353.5" y="1563.4106">Display issues</text><path d="M58,1583.4766 L122,1583.4766 L122,1590.6094 L112,1600.6094 L58,1600.6094 L58,1583.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="456.6016" style="stroke:#000000;stroke-width:1.5;" width="1879" x="58" y="1583.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="73" y="1596.5435">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="100" x="137" y="1595.687">[Approve Issue]</text><polygon fill="#181818" points="324.5,1617.7422,334.5,1621.7422,324.5,1625.7422,328.5,1621.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="108.5" x2="330.5" y1="1621.7422" y2="1621.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="115.5" y="1616.6763">Click "Approve for Appointment"</text><polygon fill="#181818" points="680.5,1646.875,690.5,1650.875,680.5,1654.875,684.5,1650.875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="686.5" y1="1650.875" y2="1650.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="343.5" y="1645.8091">Show confirmation dialog</text><polygon fill="#181818" points="324.5,1676.0078,334.5,1680.0078,324.5,1684.0078,328.5,1680.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="108.5" x2="330.5" y1="1680.0078" y2="1680.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="115.5" y="1674.9419">Confirm</text><polygon fill="#181818" points="680.5,1705.1406,690.5,1709.1406,680.5,1713.1406,684.5,1709.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="686.5" y1="1709.1406" y2="1709.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310" x="343.5" y="1704.0747">POST /api/v2/live-notifications/submit-notification</text><polygon fill="#181818" points="1714,1734.2734,1724,1738.2734,1714,1742.2734,1718,1738.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="692.5" x2="1720" y1="1738.2734" y2="1738.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238" x="699.5" y="1733.2075">Lookup user_id, issue_id, authority_id</text><polygon fill="#181818" points="920.5,1763.4063,930.5,1767.4063,920.5,1771.4063,924.5,1767.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="692.5" x2="926.5" y1="1767.4063" y2="1767.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="699.5" y="1762.3403">Forward notification to target user</text><path d="M283.5,1782.4063 L347.5,1782.4063 L347.5,1789.5391 L337.5,1799.5391 L283.5,1799.5391 L283.5,1782.4063 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="90.2031" style="stroke:#000000;stroke-width:1.5;" width="1643.5" x="283.5" y="1782.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="298.5" y="1795.4731">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98" x="362.5" y="1794.6167">[User is online]</text><polygon fill="#181818" points="347.5,1816.6719,337.5,1820.6719,347.5,1824.6719,343.5,1820.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="931.5" y1="1820.6719" y2="1820.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="353.5" y="1815.606">Push notification in real-time</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="283.5" x2="1927" y1="1829.6719" y2="1829.6719"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="100" x="288.5" y="1839.8823">[User is offline]</text><polygon fill="#181818" points="1832.5,1860.6094,1842.5,1864.6094,1832.5,1868.6094,1836.5,1864.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="932.5" x2="1838.5" y1="1864.6094" y2="1864.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="939.5" y="1859.5435">Queue notification</text><polygon fill="#181818" points="347.5,1896.7422,337.5,1900.7422,347.5,1904.7422,343.5,1900.7422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="691.5" y1="1900.7422" y2="1900.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332" x="353.5" y="1895.6763">{ "message": "Notification successfully submitted" }</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="58" x2="1937" y1="1909.7422" y2="1909.7422"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="88" x="63" y="1919.9526">[Reject Issue]</text><polygon fill="#181818" points="324.5,1940.6797,334.5,1944.6797,324.5,1948.6797,328.5,1944.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="108.5" x2="330.5" y1="1944.6797" y2="1944.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="115.5" y="1939.6138">Reject issue</text><polygon fill="#181818" points="680.5,1969.8125,690.5,1973.8125,680.5,1977.8125,684.5,1973.8125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="686.5" y1="1973.8125" y2="1973.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="343.5" y="1968.7466">POST /issues/{id}/reject</text><polygon fill="#181818" points="1714,1998.9453,1724,2002.9453,1714,2006.9453,1718,2002.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="692.5" x2="1720" y1="2002.9453" y2="2002.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="699.5" y="1997.8794">Update status = Rejected</text><polygon fill="#181818" points="347.5,2028.0781,337.5,2032.0781,347.5,2036.0781,343.5,2032.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="691.5" y1="2032.0781" y2="2032.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="353.5" y="2027.0122">Rejection confirmation</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1947" x="0" y="2067.6445"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="2067.6445" y2="2067.6445"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="2070.6445" y2="2070.6445"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="167" x="890" y="2057.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="148" x="896" y="2073.145">Citizen Notifications</text><polygon fill="#181818" points="324.5,2107.3438,334.5,2111.3438,324.5,2115.3438,328.5,2111.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31.5" x2="330.5" y1="2111.3438" y2="2111.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="38.5" y="2106.2778">Click bell icon</text><polygon fill="#181818" points="680.5,2136.4766,690.5,2140.4766,680.5,2144.4766,684.5,2140.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="686.5" y1="2140.4766" y2="2140.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="343.5" y="2135.4106">Navigate to /notifications</text><polygon fill="#181818" points="920.5,2165.6094,930.5,2169.6094,920.5,2173.6094,924.5,2169.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="926.5" y1="2169.6094" y2="2169.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="343.5" y="2164.5435">Subscribe to notifications</text><path d="M283.5,2184.6094 L347.5,2184.6094 L347.5,2191.7422 L337.5,2201.7422 L283.5,2201.7422 L283.5,2184.6094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="96.5313" style="stroke:#000000;stroke-width:1.5;" width="729.5" x="283.5" y="2184.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="298.5" y="2197.6763">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="165" x="362.5" y="2196.8198">[New Notification Arrives]</text><polygon fill="#181818" points="347.5,2218.875,337.5,2222.875,347.5,2226.875,343.5,2222.875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="341.5" x2="931.5" y1="2222.875" y2="2222.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="353.5" y="2217.8091">Display notification</text><path d="M341,2235.875 L341,2275.875 L640,2275.875 L640,2245.875 L630,2235.875 L341,2235.875 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M630,2235.875 L630,2245.875 L640,2245.875 L630,2235.875 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="278" x="347" y="2252.9419">- If "approved_for_appointment_scheduling"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="347" y="2268.0747">- Show "Book Now" button</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1947" x="0" y="2308.707"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="2308.707" y2="2308.707"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1947" y1="2311.707" y2="2311.707"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="226" x="860.5" y="2298.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="207" x="866.5" y="2314.2075">Appointment and Feedback</text><polygon fill="#181818" points="324.5,2348.4063,334.5,2352.4063,324.5,2356.4063,328.5,2352.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31.5" x2="330.5" y1="2352.4063" y2="2352.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="38.5" y="2347.3403">View appointment</text><polygon fill="#181818" points="680.5,2377.5391,690.5,2381.5391,680.5,2385.5391,684.5,2381.5391" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="686.5" y1="2381.5391" y2="2381.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="343.5" y="2376.4731">GET /appointments</text><polygon fill="#181818" points="1714,2406.6719,1724,2410.6719,1714,2414.6719,1718,2410.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="692.5" x2="1720" y1="2410.6719" y2="2410.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="699.5" y="2405.606">Fetch appointments</text><polygon fill="#181818" points="703.5,2435.8047,693.5,2439.8047,703.5,2443.8047,699.5,2439.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="697.5" x2="1725" y1="2439.8047" y2="2439.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="709.5" y="2434.7388">Appointment list</text><polygon fill="#181818" points="347.5,2464.9375,337.5,2468.9375,347.5,2472.9375,343.5,2468.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="691.5" y1="2468.9375" y2="2468.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="353.5" y="2463.8716">Show appointment details</text><polygon fill="#181818" points="324.5,2494.0703,334.5,2498.0703,324.5,2502.0703,328.5,2498.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="31.5" x2="330.5" y1="2498.0703" y2="2498.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="38.5" y="2493.0044">Submit feedback</text><polygon fill="#181818" points="680.5,2523.2031,690.5,2527.2031,680.5,2531.2031,684.5,2527.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="336.5" x2="686.5" y1="2527.2031" y2="2527.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="343.5" y="2522.1372">POST /feedback</text><polygon fill="#181818" points="1714,2552.3359,1724,2556.3359,1714,2560.3359,1718,2556.3359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="692.5" x2="1720" y1="2556.3359" y2="2556.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="699.5" y="2551.27">Save feedback</text><polygon fill="#181818" points="347.5,2581.4688,337.5,2585.4688,347.5,2589.4688,343.5,2585.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="341.5" x2="691.5" y1="2585.4688" y2="2585.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="353.5" y="2580.4028">Feedback confirmation</text><!--MD5=[e06e96076f8664a4e09adc97cda0e9f3]
@startuml
actor Citizen as CIT
actor "Gov Official" as GOV
participant "Frontend\n(React TS)" as FE
participant "Backend API\n(Node.js)" as BE
participant "WebSocket Server\n(Socket.IO)" as WS
participant "Clerk Auth" as CLERK
participant "NIC Verification Service" as NIC
participant "Facebook Auth" as FB
participant "Google Auth" as GG
participant "AI Agent Service\n(Python)" as AI
database "Database" as DB
collections "Notification Queue\n(per user_id)" as NQ

== Citizen Registration ==
CIT -> FE: Open Landing Page
CIT -> FE: Choose Sign Up
FE -> CLERK: Create user (email/password or social)
alt Social Login - Facebook
    CLERK -> FB: OAuth request
    FB - -> CLERK: Auth success
else Social Login - Google
    CLERK -> GG: OAuth request
    GG - -> CLERK: Auth success
end
CLERK - -> FE: User created
FE -> BE: POST /verify-nic
BE -> NIC: Verify NIC
NIC - -> BE: OK
BE -> DB: Save NIC verification status

== Citizen Login ==
CIT -> FE: Login
FE -> CLERK: Authenticate user
CLERK - -> FE: Session token
BE - -> FE: Login success
FE -> WS: Connect with Clerk token
WS -> CLERK: Validate Clerk token
CLERK - -> WS: Valid
WS -> DB: Map Clerk user_id -> Database user_id
DB - -> WS: User identified
WS -> NQ: Check undelivered notifications
NQ - -> WS: Any pending?
WS - -> FE: Deliver undelivered notifications

== Issue Reporting ==
CIT -> FE: Create new issue
FE -> BE: POST /issues
BE -> DB: Save issue
BE - -> FE: Confirmation

== Gov Official Login ==
GOV -> FE: Login
FE -> BE: Authenticate user
BE - -> FE: Session token
BE - -> FE: Login success
WS -> DB: Map Clerk user_id -> Database user_id
DB - -> WS: User identified
WS -> NQ: Check undelivered notifications
NQ - -> WS: Any pending?
WS - -> FE: Deliver undelivered notifications

== Gov Official Issue Management ==
GOV -> FE: View assigned issues
FE -> BE: GET /issues/assigned
BE -> DB: Fetch assigned issues
DB - -> BE: List of issues
BE - -> FE: Display issues

alt Approve Issue
    GOV -> FE: Click "Approve for Appointment"
    FE -> BE: Show confirmation dialog
    GOV -> FE: Confirm
    FE -> BE: POST /api/v2/live-notifications/submit-notification
    BE -> DB: Lookup user_id, issue_id, authority_id
    BE -> WS: Forward notification to target user
    alt User is online
        WS -> FE: Push notification in real-time
    else User is offline
        WS -> NQ: Queue notification
    end
    BE - -> FE: { "message": "Notification successfully submitted" }
else Reject Issue
    GOV -> FE: Reject issue
    FE -> BE: POST /issues/{id}/reject
    BE -> DB: Update status = Rejected
    BE - -> FE: Rejection confirmation
end

== Citizen Notifications ==
CIT -> FE: Click bell icon
FE -> BE: Navigate to /notifications
FE -> WS: Subscribe to notifications
alt New Notification Arrives
    WS -> FE: Display notification
    note right of FE
      - If "approved_for_appointment_scheduling"
      - Show "Book Now" button
    end note
end

== Appointment and Feedback ==
CIT -> FE: View appointment
FE -> BE: GET /appointments
BE -> DB: Fetch appointments
DB - -> BE: Appointment list
BE - -> FE: Show appointment details

CIT -> FE: Submit feedback
FE -> BE: POST /feedback
BE -> DB: Save feedback
BE - -> FE: Feedback confirmation
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>